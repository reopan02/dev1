# é¡¹ç›®æ¦‚è§ˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
e-commerce/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ main.py                # FastAPIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ schemas.py         # Pydanticæ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ gemini_client.py   # Gemini APIå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ prompt_loader.py   # æç¤ºè¯æ¨¡æ¿åŠ è½½å™¨
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GlassCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageUpload.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ImagePreview.jsx
â”‚   â”‚   â”‚   â””â”€â”€ PromptEditor.jsx
â”‚   â”‚   â”œâ”€â”€ panels/            # é¢æ¿ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ CompetitorPanel.jsx
â”‚   â”‚   â”‚   â””â”€â”€ GenerationPanel.jsx
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.js         # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â””â”€â”€ glassmorphism.css
â”‚   â”‚   â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨
â”‚   â”‚   â””â”€â”€ main.jsx           # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ Guidance/                   # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ reverse_prompt.md      # åå‘æç¤ºè¯æ¨¡æ¿
â”‚   â””â”€â”€ model.txt              # æ¨¡å‹è°ƒç”¨æŒ‡å—
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ plans/
â”‚   â”‚   â””â”€â”€ 2026-01-28-ecommerce-image-generator-design.md
â”‚   â”œâ”€â”€ TESTING.md             # æµ‹è¯•æŒ‡å—
â”‚   â””â”€â”€ DEPLOYMENT.md          # éƒ¨ç½²æŒ‡å—
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test_backend.py        # åç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ start-dev.sh               # Linux/Macå¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-dev.bat              # Windowså¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd e-commerce
```

### 2. é…ç½®ç¯å¢ƒ
```bash
cd backend
cp .env.example .env
# ç¼–è¾‘.envï¼Œå¡«å…¥äº‘é›¾APIå¯†é’¥
```

### 3. ä¸€é”®å¯åŠ¨ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

**Linux/Mac**:
```bash
./start-dev.sh
```

**Windows**:
```bash
start-dev.bat
```

### 4. è®¿é—®åº”ç”¨
- å‰ç«¯: http://localhost:5173
- åç«¯: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. ç«å“åˆ†æ
- ä¸Šä¼ ç«å“ç”µå•†å›¾ç‰‡
- AIåˆ†ææ„å›¾ã€å…‰å½±ã€é£æ ¼
- ç”Ÿæˆå¯ç¼–è¾‘çš„æç¤ºè¯

### 2. å›¾ç‰‡ç”Ÿæˆ
- ä¸Šä¼ ç›®æ ‡äº§å“å›¾ç‰‡
- åº”ç”¨åˆ†æå¾—åˆ°çš„æ„å›¾é£æ ¼
- ç”Ÿæˆä¸“ä¸šç”µå•†å›¾ç‰‡

### 3. å‚æ•°é…ç½®
- **å®½é«˜æ¯”**: 1:1, 16:9, 9:16, 4:3, 3:4
- **åˆ†è¾¨ç‡**: 1K, 2K, 4K
- **å¹¶å‘æ§åˆ¶**: æ”¯æŒå¤šæ¬¡è¿­ä»£ä¼˜åŒ–

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: Glassmorphism CSS
- **çŠ¶æ€ç®¡ç†**: React Hooks

### åç«¯
- **æ¡†æ¶**: FastAPI
- **AIæ¨¡å‹**:
  - Gemini 2.5 Pro (å›¾ç‰‡åˆ†æ)
  - Gemini 3 Pro Image Preview (å›¾ç‰‡ç”Ÿæˆ)
- **APIä¸­è½¬**: äº‘é›¾API
- **æ•°æ®éªŒè¯**: Pydantic

## ğŸ“Š å·¥ä½œæµç¨‹

```
1. ç”¨æˆ·ä¸Šä¼ ç«å“å›¾ç‰‡
   â†“
2. Gemini 2.5 Pro åˆ†ææ„å›¾
   â†“
3. ç”Ÿæˆæç¤ºè¯ï¼ˆå¯ç¼–è¾‘ï¼‰
   â†“
4. ç”¨æˆ·ä¸Šä¼ ç›®æ ‡äº§å“å›¾ç‰‡
   â†“
5. Gemini 3 Pro Image ç”Ÿæˆæ–°å›¾
   â†“
6. ç”¨æˆ·ä¸‹è½½ç»“æœ
   â†“
7. å¯è¿­ä»£ä¼˜åŒ–ï¼ˆä¿®æ”¹æç¤ºè¯é‡æ–°ç”Ÿæˆï¼‰
```

## ğŸ”‘ å…³é”®ç‰¹æ€§

### Glassmorphism UI
- æ¯›ç»ç’ƒæ•ˆæœ
- æ¸å˜èƒŒæ™¯
- æµç•…åŠ¨ç”»
- å“åº”å¼è®¾è®¡

### æ™ºèƒ½åˆ†æ
- æ„å›¾æ–¹å¼è¯†åˆ«
- å…‰å½±æ•ˆæœåˆ†æ
- èƒŒæ™¯é£æ ¼æå–
- æ•´ä½“æ°›å›´æ•æ‰

### çµæ´»ç”Ÿæˆ
- å¤šç§å®½é«˜æ¯”æ”¯æŒ
- 1K/2K/4Kåˆ†è¾¨ç‡
- æç¤ºè¯å¯ç¼–è¾‘
- è¿­ä»£ä¼˜åŒ–æ”¯æŒ

## ğŸ“ APIç«¯ç‚¹

### POST /api/analyze
åˆ†æç«å“å›¾ç‰‡å¹¶ç”Ÿæˆæç¤ºè¯

**è¯·æ±‚**:
```json
{
  "image": "base64_encoded_image"
}
```

**å“åº”**:
```json
{
  "prompt": "ç”Ÿæˆçš„æ„å›¾æç¤ºè¯",
  "status": "success"
}
```

### POST /api/generate
ç”Ÿæˆäº§å“å›¾ç‰‡

**è¯·æ±‚**:
```json
{
  "target_image": "base64_encoded_image",
  "prompt": "æ„å›¾æç¤ºè¯",
  "aspect_ratio": "1:1",
  "image_size": "1K"
}
```

**å“åº”**:
```json
{
  "generated_image": "base64_encoded_image",
  "status": "success"
}
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œåç«¯æµ‹è¯•
```bash
cd tests
python test_backend.py
```

### æµ‹è¯•æ¸…å•
è¯¦è§ [docs/TESTING.md](docs/TESTING.md)

## ğŸš¢ éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
./start-dev.sh  # æˆ– start-dev.bat
```

### ç”Ÿäº§ç¯å¢ƒ
è¯¦è§ [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md)

æ”¯æŒçš„éƒ¨ç½²æ–¹å¼:
- å•æœåŠ¡å™¨éƒ¨ç½²ï¼ˆNginx + Systemdï¼‰
- Dockeréƒ¨ç½²
- äº‘å¹³å°éƒ¨ç½²ï¼ˆVercel + Railway / Renderï¼‰

## ğŸ“š æ–‡æ¡£

- [è®¾è®¡æ–‡æ¡£](docs/plans/2026-01-28-ecommerce-image-generator-design.md)
- [æµ‹è¯•æŒ‡å—](docs/TESTING.md)
- [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)
- [APIæ–‡æ¡£](http://localhost:8000/docs) (å¯åŠ¨åè®¿é—®)

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

**å¿…éœ€**:
- `YUNWU_API_KEY`: äº‘é›¾APIå¯†é’¥
- `YUNWU_BASE_URL`: äº‘é›¾APIåœ°å€

**å¯é€‰**:
- `PORT`: åç«¯ç«¯å£ï¼ˆé»˜è®¤8000ï¼‰
- `HOST`: åç«¯ä¸»æœºï¼ˆé»˜è®¤0.0.0.0ï¼‰
- `GEMINI_ANALYZE_MODEL`: åˆ†ææ¨¡å‹ï¼ˆé»˜è®¤gemini-2.5-proï¼‰
- `GEMINI_IMAGE_MODEL`: ç”Ÿæˆæ¨¡å‹ï¼ˆé»˜è®¤gemini-3-pro-image-previewï¼‰

### å›¾ç‰‡è¦æ±‚
- æ ¼å¼: JPG, PNG
- å¤§å°: æœ€å¤§5MB
- æ¨è: 1-3MBï¼Œæ¸…æ™°åº¦é«˜

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **APIé…é¢**: æ³¨æ„äº‘é›¾APIçš„ä½¿ç”¨é…é¢
2. **ç”Ÿæˆæ—¶é—´**:
   - 1Kå›¾ç‰‡: ~30-60ç§’
   - 2Kå›¾ç‰‡: ~60-90ç§’
   - 4Kå›¾ç‰‡: ~90-120ç§’
3. **ç½‘ç»œè¦æ±‚**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
4. **æµè§ˆå™¨å…¼å®¹**: æ¨èä½¿ç”¨Chromeã€Firefoxã€Safariæœ€æ–°ç‰ˆ

## ğŸ› æ•…éšœæ’æŸ¥

### åç«¯æ— æ³•å¯åŠ¨
1. æ£€æŸ¥Pythonç‰ˆæœ¬ >= 3.8
2. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ¿€æ´»
3. æ£€æŸ¥.envæ–‡ä»¶é…ç½®
4. æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨

### å‰ç«¯æ— æ³•å¯åŠ¨
1. æ£€æŸ¥Node.jsç‰ˆæœ¬ >= 16
2. æ£€æŸ¥npmä¾èµ–æ˜¯å¦å®‰è£…
3. æŸ¥çœ‹ç«¯å£5173æ˜¯å¦è¢«å ç”¨

### APIè°ƒç”¨å¤±è´¥
1. æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. æŸ¥çœ‹åç«¯æ—¥å¿—
4. éªŒè¯å›¾ç‰‡æ ¼å¼å’Œå¤§å°

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- å›¾ç‰‡ä¸Šä¼ å‰è‡ªåŠ¨å‹ç¼©
- Base64ç¼–ç ä¼˜åŒ–
- å‰ç«¯ä»£ç åˆ†å‰²
- åç«¯å¼‚æ­¥å¤„ç†
- Nginxåå‘ä»£ç†
- é™æ€èµ„æºç¼“å­˜

## ğŸ” å®‰å…¨æªæ–½

- APIå¯†é’¥ç¯å¢ƒå˜é‡å­˜å‚¨
- å›¾ç‰‡å¤§å°å’Œæ ¼å¼éªŒè¯
- CORSè·¨åŸŸé™åˆ¶
- é€Ÿç‡é™åˆ¶ï¼ˆå¯é…ç½®ï¼‰
- HTTPSåŠ å¯†ä¼ è¾“

## ğŸ¨ UIè®¾è®¡

### é…è‰²æ–¹æ¡ˆ
- ä¸»è‰²: ç´«è‰²æ¸å˜ (#667eea â†’ #764ba2)
- è¾…è‰²: ç²‰è‰²æ¸å˜ (#f093fb â†’ #f5576c)
- èƒŒæ™¯: å¤šè‰²æ¸å˜
- ç»ç’ƒæ•ˆæœ: åŠé€æ˜ç™½è‰² + æ¨¡ç³Š

### äº¤äº’è®¾è®¡
- æ‹–æ‹½ä¸Šä¼ 
- å®æ—¶é¢„è§ˆ
- åŠ è½½åŠ¨ç”»
- é”™è¯¯æç¤º
- æˆåŠŸåé¦ˆ

## ğŸ“ æ”¯æŒ

- äº‘é›¾APIæ–‡æ¡£: https://yunwu.apifox.cn
- Gemini APIæ–‡æ¡£: https://ai.google.dev/gemini-api/docs

## ğŸ“„ License

MIT

---

**å¼€å‘è€…**: Claude Code + User
**ç‰ˆæœ¬**: 1.0.0
**æ›´æ–°æ—¥æœŸ**: 2026-01-29
